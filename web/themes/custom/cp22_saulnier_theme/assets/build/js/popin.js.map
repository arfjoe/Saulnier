{"version":3,"file":"popin.js","sources":["../../src/javascript/src/common/drupal/drupal.js","../../src/javascript/src/popin/src/PopinDefault.js","../../src/javascript/src/popin/popin.js"],"sourcesContent":["export const $ = jQuery;\nexport let T = {\n    /**\n     * Renvoie vrai si le context est root (document)\n     * @param context\n     */\n    contextIsRoot: function( context){\n        return 'HTML' === $($(context).children()[0]).prop(\"tagName\");\n    },\n    /**\n     * Retourne vrai si la variable est définie.\n     * @param variable\n     * @returns {boolean}\n     */\n    isDefined: function (variable) {\n        return 'undefined' !== typeof variable;\n    },\n    /**\n     * Retourne la taille de la fenêtre dans un objet avec .width et .height\n     * @returns object\n     */\n    viewport: function () {\n        var e = window, a = 'inner';\n        if (!('innerWidth' in window )) {\n            a = 'client';\n            e = document.documentElement || document.body;\n        }\n        return { width : e[ a+'Width' ] , height : e[ a+'Height' ]};\n    }\n};\nexport let DrupalHelpers = {\n    getBasePath() {\n        return drupalSettings.path.baseUrl + drupalSettings.path.pathPrefix;\n    }\n};","import {$, T} from \"../../common/drupal/drupal\";\n\nclass PopinDefault {\n\n    /**\n     * Initialize event listeners\n     */\n    init () {\n        this.$body = $('body');\n        this.$popins = $('.Popin');\n        this.$popinWrappers = $('.Popin-wrapper');\n        this.$triggers = $('.Popin-trigger');\n\n        //Hamburger element to close touch menu on popin opening :\n        this.$hamburger = $('#hamburger');\n\n        // add closing icon to all popins, @TODO change classes according to graphics\n        this.$popinWrappers.prepend('<span class=\"Popin-close icon-cross fal fa-times\"></span>');\n\n        this.$triggers.on('click', ev => {this.triggerClick(ev);});\n        this.$popins.on('click','.Popin-close', ev => {this.closePopins();});\n        this.$popins.on('click', ev => {this.closePopins();});\n        this.$popins.on('click', '.Popin-wrapper', function (e) {e.stopPropagation()});\n    }\n    /**\n     * Open modal when click on trigger\n     */\n    triggerClick (ev) {\n        if (this.$hamburger.hasClass('open')) {\n            this.$hamburger.trigger('click');\n        }\n        this.closePopins();\n        let target = $(ev.currentTarget).data(\"popin-target\");\n        let popin = $(target);\n\n        popin.addClass('open');\n\n        // freeze body to prevent scroll\n        this.$body.addClass('no-scroll');\n    }\n\n    /**\n     * Close all popins\n     */\n    closePopins () {\n        this.$popins.removeClass('open');\n\n        //REMOVE FROZEN STATE OF BODY\n        this.$body.removeClass('no-scroll');\n    }\n\n    attach(context) {\n        if(T.contextIsRoot(context)) {\n            this.init(context);\n        }\n    }\n}\n\nexport let popinDefault = new PopinDefault();\n","import {popinDefault} from \"./src/PopinDefault\";\n\n(function (Drupal) { // closure\n    'use strict';\n\n    // Popin\n    Drupal.behaviors.popinDefault = popinDefault;\n}(Drupal));"],"names":["$","jQuery","T","contextIsRoot","context","children","prop","isDefined","variable","viewport","e","window","a","document","documentElement","body","width","height","PopinDefault","$body","$popins","$popinWrappers","$triggers","$hamburger","prepend","on","ev","triggerClick","closePopins","stopPropagation","hasClass","trigger","target","currentTarget","data","popin","addClass","removeClass","init","popinDefault","Drupal"],"mappings":"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"}